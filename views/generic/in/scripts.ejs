<script>
    var currencyName = function(){
        var currency = $.cookie('currency-display');
        if (currency == "ca"){
            return "CADs"
        }
        else if (currency == "eu"){
            return "Euro"
        }
        else if (currency == "uk"){
            return "GBP"
        }
        else if (currency == "au"){
            return "AUD"
        }
        else if (currency == "mx"){
            return "Peso"
        }
        else if (currency == "br"){
            return "Real"
        }
        else if (currency == "ar"){
            return "Peso"
        }
        else if (currency == "jp"){
            return "Yen"
        }
        else if (currency == "ch"){
            return "Yuan"
        }
        else if (currency == "bitcoin"){
            return "BTC"
        }
        else{
            return "Satoshis"
        }
    }
    //Takes input in currency entered and converts it to Satoshis
    var currencyInput = function(amount){
        var satoshis = 0;
        var num_amount = parseFloat(amount);
        var btc_to_usd = <%= bitbox_btc_to_usd %>
        var satoshi_to_btc = 0.00000001;
        var currency = $.cookie('currency-display');
        if (currency == "usd"){
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "cad"){
            var usd_to_cur = <%= bitbox_usd_to_ca %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "eu"){
            var usd_to_cur = <%= bitbox_usd_to_eu %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "uk"){
            var usd_to_cur = <%= bitbox_usd_to_uk %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "au"){
            var usd_to_cur = <%= bitbox_usd_to_au %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "mx"){
            var usd_to_cur = <%= bitbox_usd_to_mx %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "br"){
            var usd_to_cur = <%= bitbox_usd_to_br %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "ar"){
            var usd_to_cur = <%= bitbox_usd_to_ar %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "jp"){
            var usd_to_cur = <%= bitbox_usd_to_jp %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "ch"){
            var usd_to_cur = <%= bitbox_usd_to_ch %>
            num_Amount = num_amount / usd_to_cur;
            satoshis = parseInt( (num_amount / btc_to_usd) / satoshi_to_btc);
        }
        else if(currency == "bitcoin"){
            satoshis = parseInt(num_amount / satoshi_to_btc);
        }
        else {
            //If its in satoshis we don't have to do anything
            satoshis = parseInt(num_amount);
        }
        console.log("Returning: " + satoshis);
        return satoshis;
    }
    //Takes Satoshis as a number and outputs the currency we display
    var currencyOutput = function(bits){
        var outStr = "";
        var btc_to_usd = <%= bitbox_btc_to_usd %>
        var satoshi_to_btc = 0.00000001;
        var currency = $.cookie('currency-display');
        console.log("CURRENCY IS " + currency);
        if (currency == "usd"){
            var total = Number((bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " Dollars";
        }
        else if (currency == "ca"){
            var conversion = <%= bitbox_usd_to_ca %>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " CAD";
        }
        else if (currency == "eu"){
            var conversion = <%= bitbox_usd_to_eu %>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " Euros";
        }
        else if (currency == "uk"){
            var conversion = <%= bitbox_usd_to_uk%>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " Pounds";
        }
        else if (currency == "au"){
            var conversion = <%= bitbox_usd_to_au %>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " AUD";
        }
        else if (currency == "mx"){
            var conversion = <%= bitbox_usd_to_mx %>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " Pesos";
        }
        else if (currency == "br"){
            var conversion = <%= bitbox_usd_to_br %>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " Reals";
        }
        else if (currency == "ar"){
            var conversion = <%= bitbox_usd_to_ar %>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " Pesos";
        }
        else if (currency == "jp"){
            var conversion = <%= bitbox_usd_to_jp %>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " Yen";
        }
        else if (currency == "ch"){
            var conversion = <%= bitbox_usd_to_ch %>
            var total = Number((conversion*bits*satoshi_to_btc*parseFloat(btc_to_usd)).toFixed(2));
            outStr = total + " Yuan";
        }
        else if (currency == "satoshi"){
            console.log("Converting to Satoshi");
            outStr = bits + " Satoshis";
        }
        else {
            console.log("Defaulting to BTC");
            outStr = Number((bits*satoshi_to_btc).toFixed(5)) + " BTC";
        }
        console.log("Output: " + outStr);
        return outStr;
    }
</script>
